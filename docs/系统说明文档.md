# 数据库设计

## 数据库设计原则

在设计数据库时，遵循以下原则：

- 结构清晰，便于理解与维护

- 失物信息与招领信息作为**独立业务模块**分别建表

- 保证基本完整性与扩展性

- 字段命名语义明确，避免歧义

  

## 数据库整体表结构

本系统数据库共设计 **4 张核心表**：

1. 用户表 `user`
2. 失物信息表 `lost_item`
3. 招领信息表 `found_item`
4. 管理日志表 `admin_log`

## 各表详细设计

### 1.用户表 `user`

#### 表用途

存储系统用户的基本信息与角色类型。

#### 字段设计

| 字段名      | 类型         | 说明                     |
| ----------- | ------------ | ------------------------ |
| id          | BIGINT       | 主键，自增               |
| username    | VARCHAR(50)  | 用户名                   |
| password    | VARCHAR(255) | 密码（加密存储）         |
| contact     | VARCHAR(100) | 联系方式（微信号）       |
| role        | VARCHAR(20)  | 用户角色（user / admin） |
| create_time | DATETIME     | 注册时间                 |

### 2.失物信息表 `lost_item`

#### 表用途

记录用户发布的失物信息。

#### 字段设计

| 字段名        | 类型         | 说明                        |
| ------------- | ------------ | --------------------------- |
| id            | BIGINT       | 主键                        |
| title         | VARCHAR(100) | 失物标题                    |
| category      | VARCHAR(50)  | 物品类别                    |
| lost_location | VARCHAR(100) | 丢失地点                    |
| lost_time     | DATETIME     | 丢失时间                    |
| description   | TEXT         | 详细描述                    |
| image_url     | VARCHAR(255) | 图片路径                    |
| status        | INT          | 状态（0 未找回 / 1 已找回） |
| user_id       | BIGINT       | 发布者 ID                   |
| create_time   | DATETIME     | 发布时间                    |

### 3.招领信息表 `found_item`

#### 表用途

记录用户发布的招领信息。

#### 字段设计

| 字段名         | 类型         | 说明                        |
| -------------- | ------------ | --------------------------- |
| id             | BIGINT       | 主键                        |
| title          | VARCHAR(100) | 招领标题                    |
| category       | VARCHAR(50)  | 物品类别                    |
| found_location | VARCHAR(100) | 捡到地点                    |
| found_time     | DATETIME     | 捡到时间                    |
| description    | TEXT         | 描述（可模糊）              |
| image_url      | VARCHAR(255) | 图片路径                    |
| status         | INT          | 状态（0 未认领 / 1 已认领） |
| user_id        | BIGINT       | 发布者 ID                   |
| create_time    | DATETIME     | 发布时间                    |

#### 设计说明

招领信息在描述字段上不强制填写完整特征信息，以防止冒领行为。

### 4.管理日志表 `admin_log`

#### 表用途

记录管理员操作，用于系统维护与审计。

#### 字段设计

| 字段名      | 类型         | 说明      |
| ----------- | ------------ | --------- |
| id          | BIGINT       | 主键      |
| admin_id    | BIGINT       | 管理员 ID |
| operation   | VARCHAR(255) | 操作内容  |
| create_time | DATETIME     | 操作时间  |

## 数据库关系说明

- user 与 lost_item：一对多
- user 与 found_item：一对多
- 失物信息与招领信息互不直接关联，通过人工匹配完成

## 建表 SQL

```sql
CREATE TABLE user (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  username VARCHAR(50) NOT NULL,
  password VARCHAR(255) NOT NULL,
  contact VARCHAR(100),
  role VARCHAR(20) DEFAULT 'user',
  create_time DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE lost_item (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  title VARCHAR(100) NOT NULL,
  category VARCHAR(50),
  lost_location VARCHAR(100),
  lost_time DATETIME,
  description TEXT,
  image_url VARCHAR(255),
  status INT DEFAULT 0,
  user_id BIGINT,
  create_time DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE found_item (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  title VARCHAR(100) NOT NULL,
  category VARCHAR(50),
  found_location VARCHAR(100),
  found_time DATETIME,
  description TEXT,
  image_url VARCHAR(255),
  status INT DEFAULT 0,
  user_id BIGINT,
  create_time DATETIME DEFAULT CURRENT_TIMESTAMP
);

```

